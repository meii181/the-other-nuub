{"ast":null,"code":"import _defineProperty from\"C:/Users/bianc/Desktop/Bachelor Exam/the-other-nuub/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/bianc/Desktop/Bachelor Exam/the-other-nuub/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/bianc/Desktop/Bachelor Exam/the-other-nuub/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import AuthenticationNav from\"./AuthenticationNav\";import{Container,Row,Col,Form,Button}from\"react-bootstrap\";import{useNavigate,useLocation}from\"react-router-dom\";import{useTranslation}from\"react-i18next\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RecoverPassword=function RecoverPassword(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),errorMessage=_useState2[0],setErrorMessage=_useState2[1];var _useState3=useState({password:\"\",confirm_password:\"\"}),_useState4=_slicedToArray(_useState3,2),userInput=_useState4[0],setUserInput=_useState4[1];var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password_key=_useState6[0],setPasswordKey=_useState6[1];var _useLocation=useLocation(),search=_useLocation.search;var navigate=useNavigate();// retrieve the key\nuseEffect(function(){var params=new URLSearchParams(search);var key=params.get(\"password_key\");setPasswordKey(key);},[search]);var handleChange=function handleChange(event){var name=event.target.name;var value=event.target.value;setUserInput(function(values){return _objectSpread(_objectSpread({},values),{},_defineProperty({},name,value));});};var handleLogInSubmit=function handleLogInSubmit(event){event.preventDefault();axios.post(\"http://localhost/api/reset_password.php?password_key=\".concat(password_key),new URLSearchParams({password:userInput.password,confirm_password:userInput.confirm_password})).then(function(response){if(response.data){navigate(\"/passwordchange\");setErrorMessage(\"\");}else{setErrorMessage(response.data);}}).catch(function(error){if(error.response&&error.response.data===\"Please type your password\"){setErrorMessage(\"Please type your password\");}else if(error.response&&error.response.data===\"Please confirm your password\"){setErrorMessage(\"Please confirm your password\");}else if(error.response&&error.response.data===\"The key is missing\"){setErrorMessage(\"The key is missing\");}else if(error.response&&error.response.data===\"The key does not contain 32 characters\"){setErrorMessage(\"The key does not contain 32 characters\");}else if(error.response&&error.response.data===\"The password do not match\"){setErrorMessage(\"The password do not match\");}else if(error.response&&error.response.data===\"The password must be at least 8 characters\"){setErrorMessage(\"The password must be at least 8 characters\");}else if(error.response&&error.response.data===\"The password cannot be longer than 15 characters\"){setErrorMessage(\"The password cannot be longer than 15 characters\");}else{console.log(error);}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AuthenticationNav,{}),/*#__PURE__*/_jsx(Container,{fluid:true,children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:12,md:12,lg:5,style:{backgroundColor:\"#FF629A\",height:\"100vh\"}}),/*#__PURE__*/_jsxs(Col,{sm:12,md:12,lg:7,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text\",style:{textAlign:\"center\",marginTop:\"10rem\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-2 p-4\",style:{fontSize:55},children:t(\"Recover your password\")}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-4\",style:{fontSize:30},children:t(\"Introduce your new password and you are ready to go\")})]}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleLogInSubmit,className:\"py-4 px-5 d-flex align-items-center flex-column\",style:{fontSize:25,fontFamily:\"primary-font\"},children:[/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"password\",placeholder:t(\"New password\"),value:userInput.password,onChange:handleChange,autoComplete:\"off\",style:{height:\"2.7rem\",marginBottom:\"1rem\",padding:\"1.5rem\",fontSize:25,borderRadius:20,borderBottom:\"3px solid grey\"}})}),/*#__PURE__*/_jsx(Form.Group,{className:\"mb-3\",children:/*#__PURE__*/_jsx(Form.Control,{type:\"password\",name:\"confirm_password\",placeholder:t(\"Confirm new password\"),value:userInput.confirm_password,onChange:handleChange,autoComplete:\"off\",style:{height:\"2.7rem\",marginBottom:\"1rem\",padding:\"1.5rem\",fontSize:25,borderRadius:20,borderBottom:\"3px solid grey\"}})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",name:\"submit\",className:\"mt-3 mb-5 px-4\",style:{fontSize:30,fontFamily:\"primary-font\",borderBottom:\"4px solid black\",borderRadius:20,backgroundColor:\"#7F7EC7\"},children:t(\"Submit\")}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",fontSize:25,fontFamily:\"secondary-font\",fontWeight:\"bold\"},children:t(errorMessage)})]})]})]})})]});};export default RecoverPassword;","map":{"version":3,"names":["React","useState","useEffect","axios","AuthenticationNav","Container","Row","Col","Form","Button","useNavigate","useLocation","useTranslation","RecoverPassword","errorMessage","setErrorMessage","password","confirm_password","userInput","setUserInput","t","password_key","setPasswordKey","search","navigate","params","URLSearchParams","key","get","handleChange","event","name","target","value","values","handleLogInSubmit","preventDefault","post","then","response","data","catch","error","console","log","backgroundColor","height","textAlign","marginTop","fontSize","fontFamily","marginBottom","padding","borderRadius","borderBottom","color","fontWeight"],"sources":["C:/Users/bianc/Desktop/Bachelor Exam/the-other-nuub/src/pages/RecoverPassword.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport AuthenticationNav from \"./AuthenticationNav\";\r\nimport { Container, Row, Col, Form, Button } from \"react-bootstrap\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst RecoverPassword = () => {\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [userInput, setUserInput] = useState({\r\n    password: \"\",\r\n    confirm_password: \"\",\r\n  });\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const [password_key, setPasswordKey] = useState(\"\");\r\n  const { search } = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  // retrieve the key\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(search);\r\n    const key = params.get(\"password_key\");\r\n    setPasswordKey(key);\r\n  }, [search]);\r\n\r\n  const handleChange = (event) => {\r\n    const name = event.target.name;\r\n    const value = event.target.value;\r\n    setUserInput((values) => ({ ...values, [name]: value }));\r\n  };\r\n\r\n  const handleLogInSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    axios\r\n      .post(\r\n        `http://localhost/api/reset_password.php?password_key=${password_key}`,\r\n        new URLSearchParams({\r\n          password: userInput.password,\r\n          confirm_password: userInput.confirm_password,\r\n        })\r\n      )\r\n\r\n      .then((response) => {\r\n        if (response.data) {\r\n          navigate(\"/passwordchange\");\r\n          setErrorMessage(\"\");\r\n        } else {\r\n          setErrorMessage(response.data);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if (\r\n          error.response &&\r\n          error.response.data === \"Please type your password\"\r\n        ) {\r\n          setErrorMessage(\"Please type your password\");\r\n        } else if (\r\n          error.response &&\r\n          error.response.data === \"Please confirm your password\"\r\n        ) {\r\n          setErrorMessage(\"Please confirm your password\");\r\n        } else if (\r\n          error.response &&\r\n          error.response.data === \"The key is missing\"\r\n        ) {\r\n          setErrorMessage(\"The key is missing\");\r\n        } else if (\r\n          error.response &&\r\n          error.response.data === \"The key does not contain 32 characters\"\r\n        ) {\r\n          setErrorMessage(\"The key does not contain 32 characters\");\r\n        } else if (\r\n          error.response &&\r\n          error.response.data === \"The password do not match\"\r\n        ) {\r\n          setErrorMessage(\"The password do not match\");\r\n        } else if (\r\n          error.response &&\r\n          error.response.data === \"The password must be at least 8 characters\"\r\n        ) {\r\n          setErrorMessage(\"The password must be at least 8 characters\");\r\n        } else if (\r\n          error.response &&\r\n          error.response.data ===\r\n            \"The password cannot be longer than 15 characters\"\r\n        ) {\r\n          setErrorMessage(\"The password cannot be longer than 15 characters\");\r\n        } else {\r\n          console.log(error);\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AuthenticationNav />\r\n      <Container fluid>\r\n        <Row>\r\n          <Col\r\n            sm={12}\r\n            md={12}\r\n            lg={5}\r\n            style={{ backgroundColor: \"#FF629A\", height: \"100vh\" }}\r\n          ></Col>\r\n\r\n          <Col sm={12} md={12} lg={7}>\r\n            <div\r\n              className=\"text\"\r\n              style={{ textAlign: \"center\", marginTop: \"10rem\" }}\r\n            >\r\n              <h1 className=\"mb-2 p-4\" style={{ fontSize: 55 }}>\r\n                {t(\"Recover your password\")}\r\n              </h1>\r\n              <p className=\"mb-4\" style={{ fontSize: 30 }}>\r\n                {t(\"Introduce your new password and you are ready to go\")}\r\n              </p>\r\n            </div>\r\n            <Form\r\n              onSubmit={handleLogInSubmit}\r\n              className=\"py-4 px-5 d-flex align-items-center flex-column\"\r\n              style={{ fontSize: 25, fontFamily: \"primary-font\" }}\r\n            >\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Control\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  placeholder={t(\"New password\")}\r\n                  value={userInput.password}\r\n                  onChange={handleChange}\r\n                  autoComplete=\"off\"\r\n                  style={{\r\n                    height: \"2.7rem\",\r\n                    marginBottom: \"1rem\",\r\n                    padding: \"1.5rem\",\r\n                    fontSize: 25,\r\n                    borderRadius: 20,\r\n                    borderBottom: \"3px solid grey\",\r\n                  }}\r\n                />\r\n              </Form.Group>\r\n\r\n              <Form.Group className=\"mb-3\">\r\n                <Form.Control\r\n                  type=\"password\"\r\n                  name=\"confirm_password\"\r\n                  placeholder={t(\"Confirm new password\")}\r\n                  value={userInput.confirm_password}\r\n                  onChange={handleChange}\r\n                  autoComplete=\"off\"\r\n                  style={{\r\n                    height: \"2.7rem\",\r\n                    marginBottom: \"1rem\",\r\n                    padding: \"1.5rem\",\r\n                    fontSize: 25,\r\n                    borderRadius: 20,\r\n                    borderBottom: \"3px solid grey\",\r\n                  }}\r\n                />\r\n              </Form.Group>\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                name=\"submit\"\r\n                className=\"mt-3 mb-5 px-4\"\r\n                style={{\r\n                  fontSize: 30,\r\n                  fontFamily: \"primary-font\",\r\n                  borderBottom: \"4px solid black\",\r\n                  borderRadius: 20,\r\n                  backgroundColor: \"#7F7EC7\",\r\n                }}\r\n              >\r\n                {t(\"Submit\")}\r\n              </Button>\r\n\r\n              <p\r\n                style={{\r\n                  color: \"red\",\r\n                  fontSize: 25,\r\n                  fontFamily: \"secondary-font\",\r\n                  fontWeight: \"bold\",\r\n                }}\r\n              >\r\n                {t(errorMessage)}\r\n              </p>\r\n            </Form>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RecoverPassword;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}