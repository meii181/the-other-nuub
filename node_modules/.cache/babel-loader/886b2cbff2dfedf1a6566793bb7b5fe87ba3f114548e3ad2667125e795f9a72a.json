{"ast":null,"code":"import _defineProperty from\"C:/Users/bianc/Desktop/Bachelor Exam/the-other-nuub/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/bianc/Desktop/Bachelor Exam/the-other-nuub/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/bianc/Desktop/Bachelor Exam/the-other-nuub/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import LoggedInNavigation from\"./LoggedInNavigation\";import{useNavigate,useLocation}from\"react-router-dom\";import{Container,Form,Row,Col,Stack,Button}from\"react-bootstrap\";import axios from\"axios\";import{useTranslation}from\"react-i18next\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditAppointment=function EditAppointment(){var navigate=useNavigate();var _useState=useState({meeting_date:\"\",meeting_time:\"\"}),_useState2=_slicedToArray(_useState,2),appointment=_useState2[0],setAppointment=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useLocation=useLocation(),search=_useLocation.search;var params=new URLSearchParams(search);var meeting_id=params.get(\"meeting_id\");var _useTranslation=useTranslation(),t=_useTranslation.t;useEffect(function(){axios.get(\"http://localhost/api/get_user.php\",{withCredentials:true}).then(function(response){if(response.data){navigate(\"/editappointment\");}else{navigate(\"/login\");}});},[navigate]);useEffect(function(){axios.get(\"http://localhost/api/check_meetings.php?meeting_id=\".concat(meeting_id),{withCredentials:true}).then(function(response){if(response.data){setAppointment(response.data);}}).catch(function(error){console.log(error);});},[meeting_id]);var handleChangeInput=function handleChangeInput(event){var name=event.target.name;var value=event.target.value;setAppointment(function(values){return _objectSpread(_objectSpread({},values),{},_defineProperty({},name,value));});};var handleUpdateSubmit=function handleUpdateSubmit(event){event.preventDefault();axios.post(\"http://localhost/api/update_meeting.php?meeting_id=\".concat(meeting_id),new URLSearchParams({meeting_date:appointment.meeting_date,meeting_time:appointment.meeting_time}),{withCredentials:true}).then(function(response){if(response.data){navigate(\"/updatedappointmentconfirm?meeting_id=\".concat(meeting_id));setErrorMessage(\"\");}else{setErrorMessage(\"Appointment submitting failed\");}}).catch(function(error){if(error.response&&error.response.data===\"You must choose a date\"){setErrorMessage(\"You must choose a date\");}else if(error.response&&error.response.data===\"You must choose a time\"){setErrorMessage(\"You must choose a time\");}else if(error.response&&error.response.data===\"Meetings are not available on weekends\"){setErrorMessage(\"Meetings are not available on weekends\");}else if(error.response&&error.response.data===\"Meetings are available between 10 AM and 3 PM\"){setErrorMessage(\"Meetings are available between 10 AM and 3 PM\");}else{console.log(error);}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(LoggedInNavigation,{}),/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsxs(Col,{sm:2,md:12,lg:12,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-2\",style:{textAlign:\"center\",fontSize:50},children:t(\"Change appointment\")}),/*#__PURE__*/_jsxs(Form,{className:\"px-5 my-5 px-5\",style:{fontSize:25,fontFamily:\"primary-font\",marginLeft:\"1rem\",marginRight:\"1rem\"},children:[/*#__PURE__*/_jsxs(Stack,{direction:\"horizontal\",gap:4,className:\"d-flex justify-content-center mb-3\",children:[/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsx(Form.Control,{size:\"lg\",type:\"date\",name:\"meeting_date\",value:appointment.meeting_date,onChange:handleChangeInput,style:{padding:\"1rem\",fontSize:25,borderRadius:20,borderBottom:\"3px solid grey\"}})}),/*#__PURE__*/_jsx(Form.Group,{children:/*#__PURE__*/_jsx(Form.Control,{size:\"lg\",type:\"time\",name:\"meeting_time\",value:appointment.meeting_time,onChange:handleChangeInput,style:{padding:\"1rem\",fontSize:25,borderRadius:20,borderBottom:\"3px solid grey\"}})})]}),/*#__PURE__*/_jsx(Stack,{direction:\"horizontal\",gap:5,className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(Button,{className:\"mt-4 px-4\",style:{fontSize:30,fontFamily:\"primary-font\",borderBottom:\"4px solid black\",borderRadius:20,backgroundColor:\"#7F7EC7\",marginBottom:\"0.5rem\"},onClick:function onClick(){return handleUpdateSubmit;},children:t(\"Confirm\")})}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",fontSize:30,fontFamily:\"secondary-font\",fontWeight:\"bold\",textAlign:\"center\"},children:t(errorMessage)})]})]})})})]});};export default EditAppointment;","map":{"version":3,"names":["React","useState","useEffect","LoggedInNavigation","useNavigate","useLocation","Container","Form","Row","Col","Stack","Button","axios","useTranslation","EditAppointment","navigate","meeting_date","meeting_time","appointment","setAppointment","errorMessage","setErrorMessage","search","params","URLSearchParams","meeting_id","get","t","withCredentials","then","response","data","catch","error","console","log","handleChangeInput","event","name","target","value","values","handleUpdateSubmit","preventDefault","post","textAlign","fontSize","fontFamily","marginLeft","marginRight","padding","borderRadius","borderBottom","backgroundColor","marginBottom","color","fontWeight"],"sources":["C:/Users/bianc/Desktop/Bachelor Exam/the-other-nuub/src/pages/LoggedIntoSession/EditAppointment.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport LoggedInNavigation from \"./LoggedInNavigation\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { Container, Form, Row, Col, Stack, Button } from \"react-bootstrap\";\r\nimport axios from \"axios\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nconst EditAppointment = () => {\r\n  const navigate = useNavigate();\r\n  const [appointment, setAppointment] = useState({\r\n    meeting_date: \"\",\r\n    meeting_time: \"\",\r\n  });\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const { search } = useLocation();\r\n\r\n  const params = new URLSearchParams(search);\r\n  const meeting_id = params.get(\"meeting_id\");\r\n\r\n  const { t } = useTranslation();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"http://localhost/api/get_user.php\", {\r\n        withCredentials: true,\r\n      })\r\n      .then((response) => {\r\n        if (response.data) {\r\n          navigate(\"/editappointment\");\r\n        } else {\r\n          navigate(\"/login\");\r\n        }\r\n      });\r\n  }, [navigate]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`http://localhost/api/check_meetings.php?meeting_id=${meeting_id}`, {\r\n        withCredentials: true,\r\n      })\r\n      .then((response) => {\r\n        if (response.data) {\r\n          setAppointment(response.data);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, [meeting_id]);\r\n\r\n  const handleChangeInput = (event) => {\r\n    const name = event.target.name;\r\n    const value = event.target.value;\r\n    setAppointment((values) => ({\r\n      ...values,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleUpdateSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    axios\r\n      .post(\r\n        `http://localhost/api/update_meeting.php?meeting_id=${meeting_id}`,\r\n        new URLSearchParams({\r\n          meeting_date: appointment.meeting_date,\r\n          meeting_time: appointment.meeting_time,\r\n        }),\r\n\r\n        { withCredentials: true }\r\n      )\r\n      .then((response) => {\r\n        if (response.data) {\r\n          navigate(`/updatedappointmentconfirm?meeting_id=${meeting_id}`);\r\n          setErrorMessage(\"\");\r\n        } else {\r\n          setErrorMessage(\"Appointment submitting failed\");\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if (\r\n          error.response &&\r\n          error.response.data === \"You must choose a date\"\r\n        ) {\r\n          setErrorMessage(\"You must choose a date\");\r\n        } else if (\r\n          error.response &&\r\n          error.response.data === \"You must choose a time\"\r\n        ) {\r\n          setErrorMessage(\"You must choose a time\");\r\n        } else if (\r\n          error.response &&\r\n          error.response.data === \"Meetings are not available on weekends\"\r\n        ) {\r\n          setErrorMessage(\"Meetings are not available on weekends\");\r\n        } else if (\r\n          error.response &&\r\n          error.response.data ===\r\n            \"Meetings are available between 10 AM and 3 PM\"\r\n        ) {\r\n          setErrorMessage(\"Meetings are available between 10 AM and 3 PM\");\r\n        } else {\r\n          console.log(error);\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <LoggedInNavigation />\r\n      <Container>\r\n        <Row>\r\n          <Col sm={2} md={12} lg={12}>\r\n            <h1\r\n              className=\"mt-2\"\r\n              style={{\r\n                textAlign: \"center\",\r\n                fontSize: 50,\r\n              }}\r\n            >\r\n              {t(\"Change appointment\")}\r\n            </h1>\r\n            <Form\r\n              className=\"px-5 my-5 px-5\"\r\n              style={{\r\n                fontSize: 25,\r\n                fontFamily: \"primary-font\",\r\n                marginLeft: \"1rem\",\r\n                marginRight: \"1rem\",\r\n              }}\r\n            >\r\n              <Stack\r\n                direction=\"horizontal\"\r\n                gap={4}\r\n                className=\"d-flex justify-content-center mb-3\"\r\n              >\r\n                <Form.Group>\r\n                  <Form.Control\r\n                    size=\"lg\"\r\n                    type=\"date\"\r\n                    name=\"meeting_date\"\r\n                    value={appointment.meeting_date}\r\n                    onChange={handleChangeInput}\r\n                    style={{\r\n                      padding: \"1rem\",\r\n                      fontSize: 25,\r\n                      borderRadius: 20,\r\n                      borderBottom: \"3px solid grey\",\r\n                    }}\r\n                  />\r\n                </Form.Group>\r\n                <Form.Group>\r\n                  <Form.Control\r\n                    size=\"lg\"\r\n                    type=\"time\"\r\n                    name=\"meeting_time\"\r\n                    value={appointment.meeting_time}\r\n                    onChange={handleChangeInput}\r\n                    style={{\r\n                      padding: \"1rem\",\r\n                      fontSize: 25,\r\n                      borderRadius: 20,\r\n                      borderBottom: \"3px solid grey\",\r\n                    }}\r\n                  />\r\n                </Form.Group>\r\n              </Stack>\r\n\r\n              <Stack\r\n                direction=\"horizontal\"\r\n                gap={5}\r\n                className=\"d-flex justify-content-center\"\r\n              >\r\n                <Button\r\n                  className=\"mt-4 px-4\"\r\n                  style={{\r\n                    fontSize: 30,\r\n                    fontFamily: \"primary-font\",\r\n                    borderBottom: \"4px solid black\",\r\n                    borderRadius: 20,\r\n                    backgroundColor: \"#7F7EC7\",\r\n                    marginBottom: \"0.5rem\",\r\n                  }}\r\n                  onClick={() => handleUpdateSubmit}\r\n                >\r\n                  {t(\"Confirm\")}\r\n                </Button>\r\n              </Stack>\r\n              <p\r\n                style={{\r\n                  color: \"red\",\r\n                  fontSize: 30,\r\n                  fontFamily: \"secondary-font\",\r\n                  fontWeight: \"bold\",\r\n                  textAlign: \"center\",\r\n                }}\r\n              >\r\n                {t(errorMessage)}\r\n              </p>\r\n            </Form>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditAppointment;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}